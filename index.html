<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="stylesheet" href="./styles/simple-grid-min.css" />
    <!-- <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script> -->
    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js"
      defer
    ></script>
    <style>
      [x-cloak]{
        display: none;
      }
    </style>
    <title>Taxi Rank App</title>
  </head>
  <body>
    <h2 style="text-align: center">
      <strong>Welcome to Johannesburg Taxi Rank</strong>
    </h2>
    <!-- :disabled="!routes.routeName.length, !routes.taxiFare.length" -->
    <div
      class="container"
      x-data="{addRoute: false, addRouteValues: false, leaveQueue: false, city: 'Johannesburg', trip: 'Chiawelo', priceOfTaxi: 13, totalMadeADay: 0, passangerInQueue: 0, passangerInTaxi: 5, numberOfTaxiAvailable: 3, totalFareOfTaxi: 0, routes: [] }"
    >
      <div class="row">
        <div class="col-8">
          <h3>Total price made a day: R<span x-text="totalMadeADay"></span></h3>
        </div>
        <div class="col-4">
          <button class="add-route" @click="addRoute = ! addRoute">
            Add route
          </button>
          <div x-show="addRoute">
            <form x-on:submit.prevent>
              <input type="text" placeholder="Route name" x-model="routes.routeName" />
              <br />
              <input type="number" placeholder="Taxi far" x-model="routes.taxiFare" />
              <br />
              <button
                x-on:click="addRouteValues = ! addRouteValues, routes.push({routeName: routes.routeName, taxiFare: routes.taxiFare, numberOfPassengersInTaxi: 0, passangersQueue: 0, numberOfPassengersInTaxi: 10, availableTaxisAtFirst: 3, totalTaxiFare: 0})"
                :disabled="!routes.routeName, !routes.taxiFare"
              >
                Add
              </button>
            </form>
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-12">
          <table>
            <tr>
              <th>City</th>
              <th>Destination</th>
              <th>No. people in queue</th>
              <th>Leaving Queue</th>
              <th>Taxi Fare</th>
              <th>Total Fare</th>
              <th>Available Taxi</th>
            </tr>
              <tr>
                <td><span x-text="city"></span></td>
                <td><span x-text="trip"></span></td>
                <td style="align-items: center">
                  <button
                    style="background-color: green; color: white"
                    @click="passangerInQueue++, totalFareOfTaxi = priceOfTaxi * passangerInQueue"
                  >
                    +
                  </button>
                  <span
                    style="background-color: rgb(226, 223, 43)"
                    x-text="passangerInQueue"
                    >0</span
                  >
                  <button
                    style="background-color: red; color: white"
                    @click="passangerInQueue--,
                    totalFareOfTaxi -= priceOfTaxi 
                    "
                  >
                    -
                  </button>
                </td>
                <td>
                  <button
                    :disabled="passangerInQueue < passangerInTaxi"
                    @click="passangerInQueue-=passangerInTaxi, numberOfTaxiAvailable--,
                    totalMadeADay += (priceOfTaxi * passangerInTaxi),
                    totalFareOfTaxi = priceOfTaxi * passangerInQueue
                    "
                  >
                    leave
                  </button>
                </td>
                <td>
                  <span>R</span>
                  <span x-text="priceOfTaxi.toFixed(2)"></span>
                </td>
                  <td>
                    <span>R</span>
                     <!-- <template x-if="passangerInQueue > passangerInTaxi"> -->
                      
                      <span x-text="totalFareOfTaxi.toFixed(2)"></span>
                     <!-- </template> -->
                  </td>
                
                
                <td>
                  <span x-text="numberOfTaxiAvailable"></span>
                </td>
              </tr>
            <template x-for="route in routes">
              <tr x-show="addRouteValues">
                <td>
                  <span x-text="city"></span>
                </td>
                <td>
                  <span x-text="route.routeName"></span>
                </td>
                <td style="align-items: center">
                  <button
                    style="background-color: green; color: white"
                    @click="route.passangersQueue++, 
                    route.totalTaxiFare = route.taxiFare * route.passangersQueue"
                  >
                    +
                  </button>
                  <span
                    style="background-color: rgb(226, 223, 43)"
                    x-text="route.passangersQueue"
                    >0</span
                  >
                  <button
                    style="background-color: red; color: white"
                    @click="route.passangersQueue--, route.totalTaxiFare -= route.taxiFare"
                  >
                    -
                  </button>
                </td>
                <td>
                  <button
                    :disabled="route.passangersQueue < route.numberOfPassengersInTaxi"
                    @click="route.passangersQueue-=route.numberOfPassengersInTaxi, route.availableTaxisAtFirst--, 
                    totalMadeADay+=(route.taxiFare * route.numberOfPassengersInTaxi),
                    route.totalTaxiFare = route.taxiFare * route.passangersQueue
                    "
                  >
                    leave
                  </button>
                </td>
                <td>
                  <span>R</span>
                  <span x-text="route.taxiFare"></span>
                </td>
                <td>
                  <!-- <template x-if="route.passangersQueue < route.numberOfPassengersInTaxi"> -->
                    <span>R</span>
                    <!-- <span x-text="(route.taxiFare * route.numberOfPassengersInTaxi).toFixed(2)">0.00</span> -->
                    <span x-text="route.totalTaxiFare"></span>
                  <!-- </template> -->
                </td>
                
                <td>
                  <span x-text="route.availableTaxisAtFirst"></span>
                </td>
              </tr>
            </template>
            <!-- <template x-for="route in routes">
              <tr>
                
                <td>
                  <span x-text="route.destination"></span>
                </td>
                <template x-if="!passangersQueue"> -->
                  <!-- <td style="align-items: center">
                    <button
                      style="background-color: green; color: white"
                      @click="route.destination.numberOfPassengersInTaxi++"
                    >
                      +
                    </button>
                    <span
                      style="background-color: rgb(226, 223, 43)"
                      x-text="route.numberOfPassengersInTaxi"
                      >0</span
                    >
                    <button
                      style="background-color: red; color: white"
                      @click="route.numberOfPassengersInTaxi--"
                    >
                      -
                    </button>
                  </td> -->
                <!-- </template> -->
                <!-- <td>
                  <button
                    :disabled="firstPrice < 11"
                    @click="firstPrice--, availableTaxisAtFirst--"
                  >
                    leave
                  </button>
                </td>
                <td>
                  <span>R</span>
                  <span x-text="route.taxiPrice"></span>
                </td>
                <td>
                  <span>R</span>
                  <span x-text="route.taxiPrice.toFixed(2)">0.00</span>
                </td>
                <td>
                  <span x-text="availableTaxisAtFirst"></span>
                </td>
              </tr>
            </template> -->
          </table>
        </div>
      </div>
      <br />
      <div
        class="row"
        style="
          background-color: rgb(255, 142, 159);
          border-radius: 7px;
          padding: 15px;
          margin: 15px;
        "
      >
        <div class="col-6">
          <div class="footer">
            <div class="contact">
              <strong>Contact us at:</strong>
              (021)-541-3000
              <br />
              <strong>twitter /fb /insta </strong> @JohannesburgTaxiRank
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="address">
            Johannesburg Taxi Rank
            <br />
            West Road
            <br />
            Bree Town
            <br />
            1339
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
